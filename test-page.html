<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        h1, h2, h3 {
            color: #333;
        }
        .highlight {
            background: #f0f8ff;
            padding: 10px;
            border-left: 4px solid #4a90e2;
            margin: 15px 0;
        }
        .quote {
            font-style: italic;
            border-left: 3px solid #ccc;
            padding-left: 15px;
            margin: 20px 0;
        }
        ul, ol {
            margin: 15px 0;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <h1>AI Translation Extension Test Page</h1>

    <div class="section">
        <h2>Welcome Section</h2>
        <p>This is a test page designed to demonstrate the AI Translation Extension's new progress tracking features. When you translate this page, you'll see real-time progress updates and visual highlighting of elements being translated.</p>

        <div class="highlight">
            <strong>Key Features:</strong> The extension now shows which elements are currently being translated with a subtle blue pulse, and completed translations are highlighted in green with different colors for each batch.
        </div>
    </div>

    <div class="section">
        <h2>Sample Content</h2>
        <p>Here are various types of content to translate:</p>

        <h3>Short Paragraphs</h3>
        <p>This is the first paragraph with some sample text.</p>
        <p>This is the second paragraph with different content.</p>
        <p>This is the third paragraph to demonstrate batch processing.</p>

        <h3>Lists and Items</h3>
        <ul>
            <li>First list item with some text</li>
            <li>Second list item with more content</li>
            <li>Third list item for variety</li>
            <li>Fourth list item to show grouping</li>
            <li>Fifth list item in the same batch</li>
        </ul>

        <ol>
            <li>Numbered item one</li>
            <li>Numbered item two</li>
            <li>Numbered item three</li>
        </ol>
    </div>

    <div class="section">
        <h2>Longer Content</h2>
        <p>This section contains longer paragraphs to test how the translation system handles more substantial text blocks. The progress tracking should show these elements being processed in batches, with clear visual feedback about which elements are currently being translated and which have been completed.</p>

        <div class="quote">
            "The best way to test a translation system is to provide it with diverse content that includes different text structures, lengths, and formatting. This helps ensure that the progress tracking works correctly across various scenarios."
        </div>

        <p>Each batch of elements will be highlighted with a different color border when completed, allowing you to see which elements were translated together in a single API call. This makes it easy to understand the batching strategy and see the translation progress in real-time.</p>
    </div>

    <div class="section">
        <h2>Technical Details</h2>
        <p>The extension processes text elements in batches of 5 to be respectful to the API rate limits. You can observe this behavior through:</p>

        <ul>
            <li>The progress overlay in the top-right corner of the page</li>
            <li>The progress display in the extension popup</li>
            <li>The visual highlighting of elements being processed</li>
            <li>The color-coded borders showing batch groupings</li>
        </ul>

        <h3>Visual Indicators</h3>
        <p>Blue pulsing background: Element currently being translated</p>
        <p>Green background with colored border: Element successfully translated</p>
        <p>Different border colors: Different batches (up to 5 colors cycle)</p>
    </div>

        <div class="section">
        <h2>Instructions</h2>
        <p>To test all the new features:</p>
        <ol>
            <li>Make sure your API is configured in the extension options</li>
            <li>Open the extension popup</li>
            <li>Click "Translate Page" button</li>
            <li>Watch the progress indicators and element highlighting</li>
            <li>Observe how elements are grouped by batch colors</li>
            <li>Use the "Stop Translation" button to cancel if needed</li>
            <li>After translation, hover over translated text to see the edit hint</li>
            <li>Click on translated text to open the adjustment menu</li>
            <li>Try different translation styles (literal, natural, formal, casual)</li>
            <li>Use "Custom Prompt" for specific translation instructions</li>
            <li>Test text selection translation with multi-element selections</li>
        </ol>

        <p>The popup will show real-time progress including the number of elements completed, current batch being processed, and overall percentage complete. After translation, you can fine-tune any translated element by clicking on it.</p>
    </div>

    <div class="section">
        <h2>New Interactive Features</h2>
        <p>This extension now includes several advanced features:</p>

        <h3>Translation Adjustment Menu</h3>
        <p>Click on any translated text to access options like:</p>
        <ul>
            <li><strong>Literal Translation:</strong> Word-for-word accuracy</li>
            <li><strong>Natural Translation:</strong> Fluent, idiomatic result</li>
            <li><strong>Formal Style:</strong> Professional language</li>
            <li><strong>Casual Style:</strong> Conversational tone</li>
            <li><strong>Custom Prompt:</strong> Your own translation instructions</li>
            <li><strong>Restore Original:</strong> Undo the translation</li>
        </ul>

        <h3>Smart Selection Translation</h3>
        <p>Select text that spans multiple elements (like this <strong>bold text across</strong> different tags) and the extension will preserve the HTML structure while translating each text node appropriately.</p>

        <h3>Progress Control</h3>
        <p>Use the stop button in the popup or on-page progress indicator to cancel long-running page translations at any time.</p>

        <h3>Developer Debugging</h3>
        <p>Open the browser console (F12) to see detailed translation logs including:</p>
        <ul>
            <li>Original text being translated</li>
            <li>Full translation prompts with context</li>
            <li>Complete API responses</li>
            <li>Batch numbers and unique request IDs</li>
            <li>Final text placement on the page</li>
        </ul>

        <h3>Smart Batching</h3>
        <p>The extension now groups related text elements together for better translation context. Elements in the same paragraph or section are translated together, providing the AI with more context for accurate translations.</p>

        <h3>Continuous Translation</h3>
        <p>Enable continuous translation in the options to automatically translate new content that appears on the page (great for chat applications, infinite scroll, or dynamically loaded content).</p>

        <div id="dynamic-content" style="margin-top: 20px; padding: 10px; border: 2px dashed #ccc;">
            <p>Dynamic content area - enable continuous translation in options and click the button below to test:</p>
            <button onclick="addDynamicContent()">Add New Content</button>
            <div id="new-content-container"></div>
        </div>

        <script>
            let contentCounter = 1;
            function addDynamicContent() {
                const container = document.getElementById('new-content-container');
                const newContent = document.createElement('p');
                newContent.textContent = `This is dynamically added content #${contentCounter}. It should be automatically translated if continuous translation is enabled.`;
                container.appendChild(newContent);
                contentCounter++;
            }
        </script>
    </div>
</body>
</html>
